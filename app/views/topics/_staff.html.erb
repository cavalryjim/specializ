<h2>Listing assignments</h2>

<%= form_tag(:controller => "topic_groups", :action => "staff_topic", :method => "post") do %>
	Select particpation rate: <input name="percentage" size="5">%
	<%= hidden_field_tag(:topic_id, @topic.id)  %>
	<%= submit_tag("Staff Topic", :confirm => 'Staff the topic?', :disabled => @topic.topic_groups.size < 1 ) %>
<% end %>

<div>
	<table id="staffing_table">
	 <thead>
	  <tr>
	    <th>User</th>
	    <th>Topic group</th>
	    <th>Manager</th>
	    <th>Remove</th>
	  </tr>
	 </thead>
	 <tbody>
		<% @assignments.each do |assignment| %>
		  <tr>
		    <td><%= link_to User.find(assignment.user_id).name, edit_topic_assignment_path(@topic, assignment) %></td>
		    <td><%= TopicGroup.find(assignment.topic_group_id).name %></td>
		    <td><%= check_box_tag assignment.id, 1, assignment.manager, { :disabled => true } %></td>
		    <td><%= link_to 'Remove?', topic_assignment_path(@topic, assignment), :confirm => 'Are you sure?', :method => :delete %></td>
		  </tr>
		<% end %>
	 </tbody>
	</table>
</div>

<% if @topic.id != nil %>
	<%= button_to 'New Assignment', new_topic_assignment_path(@topic), :method => :get, :disabled => @topic.topic_groups.size < 1  %> 
<% end %>
