<h2>Listing assignments</h2>
<div>
  <div align=left>
	<%= form_tag(:controller => "topics", :action => "staff_topic", :method => "post") do %>
		Select the minimum participation percentage: <input name="percentage" size="5">%
		<%= hidden_field_tag(:topic_id, @topic.id)  %>
		<%= submit_tag("Staff Topic", :confirm => 'Staff the topic?', :disabled => @topic.topic_groups.size < 1 ) %>
	<% end %>
  </div>
</div>

<div>
	<table id="staffing_table" class="display">
	 <thead>
	  <tr>
	    <th class="center">User</th>
	    <th class="center">Topic group</th>
	    <th class="center">Manager</th>
	    <th class="center">Remove</th>
	  </tr>
	 </thead>
	 <tbody>
		<% @assignments.each do |assignment| %>
		  <tr>
		    <td><%= link_to User.find(assignment.user_id), edit_topic_assignment_path(@topic, assignment) %></td>
		    <td><%= TopicGroup.find(assignment.topic_group_id).name %></td>
		    <td class="center">
			  <%= check_box_tag assignment.id, 1, assignment.manager, { :disabled => true } %>
			</td>
		    <td class="center">
			  <%= link_to image_tag('icons/cross.png'), topic_assignment_path(@topic, assignment), 
				:confirm => 'Remove this user from participating in this topic?', :method => :delete %>
			</td>
		  </tr>
		<% end %>
	 </tbody>
	</table>
</div>

<% if @topic.id != nil %>
	<%= button_to 'New Assignment', new_topic_assignment_path(@topic), :method => :get, :disabled => @topic.topic_groups.size < 1  %> 
<% end %>
